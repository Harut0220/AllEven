<link rel="stylesheet" href="/styles/event.css" /><link
  rel="preconnect"
  href="https://fonts.googleapis.com"
/>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<style>
        .menuIconImg{
    width: 15px;
    filter: brightness(0) invert(1);}
        #imageModal{
  position: fixed !important;
  top: 0;
  left: 0;
  background-color: rgba(0, 0, 0, 0.391);
  width: 100%;
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
}

.imgaeModal_block{
  display: flex;
  flex-direction: column;
  padding: 40px;
  border-radius: 10px;
  background-color: aliceblue;
  margin: 0 auto;
  position: relative;
}
#modalImage{
width: 100%;
    height: 100%;}
#div_x{
  display: flex;
  flex-direction: column;
  height: 500px;
}
#closeModal{
    font-size: 30px;
    padding: 10px;
    position: absolute;
    right: 5px;
    top: -10px;
    cursor: pointer;
}

.removeButton{
  width: 20px;
  height: 20px;
}

.service_img_div{
  display: flex;
  gap: 15px;
  flex-wrap: wrap;
}
</style>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link
  href="https://fonts.googleapis.com/css2?family=Exo&display=swap"
  rel="stylesheet"
/>

<div id="events" style="display: flex;">
    <div class="modal"><img src="/icon/icons8-verified-48.png" alt=""><span class="modalText"></span></div>

  <div class="eventMainBody">
    <div class="eventHead">
      <div class="eventHeadFirstPart">
        <p><a href="/">Главная</a>
          &gt;
          <a href="/admin/profile/events">Встречи</a>
          &gt;
          <a id="changeNavText">Все Встречи</a></p>
      </div>
    </div>
    <div id="allEvMainDiv">
      <div class="allEvBox" style="width: 50%;">
        <div id="allEvBox_header">
          <h4>Проверки паспорт</h4>
          <form
            action="/admin/profile/meeting/verify/resolve/{{getValue event "_id" }}"
            method="POST"
           id="eventForm">
            <input name="status" hidden value="1" />
            <button type="button" class="buttonAllow" onclick="buttonFunc()">Одобрить</button>
          </form>
        </div>
        <hr />
        <div class="allEvBoxCont" >
          <div id="pics1">
              {{#optionsFromArrays images "_id" "path"}}
                            <img src="/{{url}}" class="allEvImg" style="width: 118px;height:118px"/>
              {{/optionsFromArrays}}
          </div>
          <div class="allEvBoxContDiv">
            <div id="boxPersonName">
                <div id="userDiv">
              <div class="userDiv">
              <img src="/{{getValue userMeet "avatar"}}" alt=""
              class="user_image" onclick="openImageModal('{{getValue userMeet "avatar"}}')">
              <div class="userData">
                <p class="userName">{{getValue userMeet "name"}} {{getValue userMeet "surname"}}</p>
                <p class="user_data">{{getValue userMeet "phone_number"}}</p>
                <p class="user_data">{{getValue userMeet "email"}}</p>
              </div>
            </div>
              <input type="text" class="inputAllow" placeholder="Категория" value="{{getValue event "name"}} {{getValue event "surname"}}  {{getValue event "family"}}" name="{{getValue event "name"}}">
              <br><span>Паспортный код</span>
              <input type="text" class="inputAllow" placeholder="Название событий" value="{{getValue event 'passport'}}" name="{{getValue event "name"}}"><br>
              <span>Срок Паспорт</span>
               <input type="text" class="inputAllow" placeholder="Категория" value="{{getValue event "term"}}" name="name"><br />
            </div>
            </div>
          </div>
        </div>
      </div>
      <div class="allEvBox" style="width: 50%;">
        <p id="deniedP">Причина отклонения Проверки паспорт</p>
        <hr />
        <div id="fillResponseMessage">{{getValue event "rejectMessage"}}</div>
          <div class="images-div">
          <img style="width: 400px; height: 400px;" src="/{{getValue event "passportImage"}}" alt="passport" id="passport"  data-bs-toggle="modal" data-bs-target="#largeModal">
          <img style="width: 400px; height: 400px;" src="/{{getValue event "image"}}" alt="passport" id="passport"  data-bs-toggle="modal" data-bs-target="#largeModal">
          </div>
      </div>
    </div>
  </div>
</div>
<script src="/js/axios.js"></script>
      <div id="imageModal" style="display: none;">
           <div class="imgaeModal_block">
                <button id="closeModal" onclick="closeFunc()" >
                x
              </button>
              <div id="div_x">
                <img id="modalImage"  src="" />
              </div>
           </div>
      </div>
<script>

  
document.querySelectorAll('img').forEach(img => {
      img.addEventListener('contextmenu', (e) => {
          e.preventDefault(); // արգելում է աջ կոճակի մենյուն
      });
  });

document.addEventListener("DOMContentLoaded", () => {
    const modalImage = document.querySelector(".passport_modal");
    const modalTitle = document.getElementById("largeModalLabel");
    const images = document.querySelectorAll(".images-div img");
    
    images.forEach(img => {
        img.addEventListener("click", () => {
            const src = img.getAttribute("src");
            modalImage.setAttribute("src", src);
            modalTitle.innerText = "Просмотр изображения"; // Change title if needed
        });
    });
});

   function buttonFunc() {
    const modal=document.querySelector('.modal');
  modal.style.display = 'flex';
 
  
    setTimeout(() => {
      const form = document.getElementById('eventForm'); 
      form.submit(); 
    }, 1000); // 
  }

  document.addEventListener("DOMContentLoaded", () => {
    const modalImage = document.querySelector(".passport_modal");
    const modalTitle = document.getElementById("largeModalLabel");
    const images = document.querySelectorAll(".images-div img");
    
    images.forEach(img => {
        img.addEventListener("click", () => {
            const src = img.getAttribute("src");
            modalImage.setAttribute("src", src);
            modalTitle.innerText = "Просмотр изображения";
        });
    });
});

  function openImageModal(path){
    const imgModal=document.getElementById('modalImage')
    imgModal.src=`/${path}`
             const imageModal=document.getElementById('imageModal')
         imageModal.style.display='flex'
         imageModal.style.position='absolute'
         imageModal.style.margin='0 auto'
  }

  function closeFunc(e){
          const imageModal=document.getElementById('imageModal')
        imageModal.style.display='none'
  }
</script>
<script src="/js/helper.js"></script>


<div class="modal fade" id="largeModal" tabindex="-1" aria-labelledby="largeModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg my_modal"> 
        <div class="modal-content ">
            <div class="modal-header">
                <h5 class="modal-title" id="largeModalLabel">Large Modal Title</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <img src="/{{getValue event "passportImage"}}" alt=""  class="passport_modal">
            </div>
        </div>
    </div>
</div>